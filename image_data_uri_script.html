<!DOCTYPE html>
<html>
   <head>
      <style id='style1'>
         body {
             background-image: url("data:image/webp;base64,UklGRjIBAABXRUJQVlA4WAoAAAAQAAAADQAADgAAQUxQSIQAAAABb6GgbRvpkvb4U/45REQO3EgsocaGGEQm1oXhg8NIsk1rvm3b/pN/fBfvxRDR/yQdPFDS+H9tUpw6d07x8qq+7xQ67tnaJ186ZOCerPL4VKk8f3XSwC1h5ZS0c0DoeiXWvha6hLHndTq5IZzskZp+arS8kx+dMHNBPvLMzTZ59W0HAABWUDggiAAAABADAJ0BKg4ADwACADQlsAJ0PZA3gDrVfKABhUIRykX7QAD+/qEPbrCudNtzQw2AYlmrfq8Nq5oXFidk2CmzUxw0YUaOMfPXWmsTBV/+e//4/p+825F46sVt+ePZV79dLIQ+sP/5HdFf+Qr/6731FZ+hseb/SVsMt7szvutqxXC/Udj191k3AAA=");
             background-size: cover;
         }
      </style>
   </head>
<body>
<img id='image1' alt='a'
 src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAAPAA4DAREAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAJ/8QAJRAAAQQBBAIBBQAAAAAAAAAAAQIDBBEFABIhMQYUE2FicYGR/8QAGAEAAwEBAAAAAAAAAAAAAAAAAAUHBAj/xAAqEQACAQIEBQIHAAAAAAAAAAABAgMEEQAFBiEHEiIxcRNhQUKBscHw8f/aAAwDAQACEQMRAD8AzP8AHEt42CvKSC2PYdQy2VECk7qJv+mvs11Jwahp9F5BJqvMiiiqlihjLFVIT1AjsHJJtcs7IQu0HMTy2ZUmYk1MogT5QSfNtv774Lz8IQco62hG1tdOIHHR7quhdj9akvFvTCaV1XUU1OnJDJaSMdNuV+4AWwVVcOqqQCFUdxYnfQTGeAEncbH98YXzM5OHZiYpuJHfDbQUr5mrST0CBfZO4n86svErVEXDmiy3SNNRwVIjiDN60IZCd0DqocWdmErPe56hZiS2F1HAaxnqCxFz8Dv4+1sWQiyPIcVEyMeMPZspUEqAG2yDyfqOBfFnRrDIsx4v6Sy3UmXUoNbdlZVZFBQF1Y3cqSA6AovMeQSMOrdsFPKmXzvC7dP5+nt38Y//2Q=="> 
<picture>
  <source  id='image2' sizes="50vw"
    srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAMAAADjyg5GAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAC6UExURQAAAAAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAAAMgrOsoAAAA9dFJOUwBAWUAIWFZZCigsLElTA1ROABA7OBgxHRkBUVUDAVJXBzg0KDoUSwVWFCJHNUM3QxUKVQtZQSQrLx9MDhCLeAj/AAAAAWJLR0QAiAUdSAAAAIRJREFUCNdFztcOwjAQRNFhKKEmdEwnoQQIvbf//y7s2Jbvw0rHsrQLqDLMwpXLF7yiY4llVhyrNT+oN6yabKHNjmWXPQj5pOsPhiOMJ9OZpmAoZ8S55oJCziVXqeI1TRvFLZOdas+D4pGn9NfZu8TA9WYPuPMBPPkyC99MgA+/hn7A3x++bgjlW7KrbgAAAABJRU5ErkJggg== 480w,data:image/webp;base64,UklGRjIBAABXRUJQVlA4WAoAAAAQAAAADQAADgAAQUxQSIQAAAABb6GgbRvpkvb4U/45REQO3EgsocaGGEQm1oXhg8NIsk1rvm3b/pN/fBfvxRDR/yQdPFDS+H9tUpw6d07x8qq+7xQ67tnaJ186ZOCerPL4VKk8f3XSwC1h5ZS0c0DoeiXWvha6hLHndTq5IZzskZp+arS8kx+dMHNBPvLMzTZ59W0HAABWUDggiAAAABADAJ0BKg4ADwACADQlsAJ0PZA3gDrVfKABhUIRykX7QAD+/qEPbrCudNtzQw2AYlmrfq8Nq5oXFidk2CmzUxw0YUaOMfPXWmsTBV/+e//4/p+825F46sVt+ePZV79dLIQ+sP/5HdFf+Qr/6731FZ+hseb/SVsMt7szvutqxXC/Udj191k3AAA= 1000w">
<img src='/a.png' alt='a'>
</picture>
</body>
<script>
function rewriteAttribute(node, attr, mirror) {
   var v = node.getAttribute(attr);
   v = v.replace(/AA/g, 'BB');
   v = v.replace(/webp/g, 'png');
   return [[attr, v]];
}
function  __rewrite_css_style(style1) {
   var v = style1.textContent;
   v = v.replace(/AA/g, 'BB');
   v = v.replace(/webp/g, 'png');
   return v;
}
var reg1 = /data:image\/jpeg;base64,(.*)/g;
var img1 = document.getElementById('image1');
var img1_src = img1.getAttribute('src');
var img1_base64 = reg1.exec(img1_src)[1];
reg1.lastIndex = 0;
var rewritten1 = rewriteAttribute(img1, 'src', true)[0][1];
var rewritten1_base64 = reg1.exec(rewritten1)[1];

var reg2 = /data:image\/png;base64,(.*) 480w,\s*data:image\/webp;base64,(.*) 1000w/g; 
var reg2_out = /data:image\/png;base64,(.*) 480w,\s*data:image\/png;base64,(.*) 1000w/g; 
var img2 = document.getElementById('image2');
var img2_srcset = img2.getAttribute('srcset');
var img2_base64 = [];
img2_base64.push(reg2.exec(img2_srcset)[1]);
reg2.lastIndex = 0;
img2_base64.push(reg2.exec(img2_srcset)[2]);
var rewritten2 = rewriteAttribute(img2, 'srcset', true)[0][1];
var rewritten2_base64 = [];
rewritten2_base64.push(reg2_out.exec(rewritten2)[1]);
reg2_out.lastIndex = 0;
rewritten2_base64.push(reg2_out.exec(rewritten2)[2]);

var reg3 = /"data:image\/webp;base64,(.*)"/g;
var reg3_out = /"data:image\/png;base64,(.*)"/g;
var style1 = document.getElementById('style1');
var img3_base64 = reg3.exec(style1.textContent)[1];
var rewritten_style =  __rewrite_css_style(style1);
var rewritten3_base64 = reg3_out.exec(rewritten_style)[1];

if (rewritten1_base64.length > 100 &&
    rewritten1_base64 !== img1_base64 &&
    rewritten2_base64[0].length > 100 &&
    rewritten2_base64[1].length > 100 &&
    rewritten2_base64[0] !== img2_base64[0] &&
    rewritten2_base64[1] !== img2_base64[1] &&
    rewritten3_base64 !== img3_base64 &&
    rewritten3_base64.length > 100) {
   console.log('true');
} else {
   console.log('false');
}
</script>
</html>
